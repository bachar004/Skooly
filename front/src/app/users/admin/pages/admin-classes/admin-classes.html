<div class="container-fluid coin px-3 py-3">
    <button type="button" class="btn btn-warning b1" data-bs-toggle="modal" data-bs-target="#addStudentModal" (click)="genmdp()">+Ajouter</button>
    <button type="button" class="btn btn-success me-2" data-bs-toggle="modal" data-bs-target="#Emploi">Voir Emploi</button>
</div>
<div class="container">
  <h3 class="mb-3">Liste des Étudiants :</h3>

  <div class="table-responsive">
    <table class="table table-striped table-hover align-middle">
      <thead class="table-warning">
        <tr>
          <th>#</th>
          <th>Nom</th>
          <th>Prénom</th>
          <th>Date_de_naissance</th>
          <th>Email</th>
          <th>Classe</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let i of tab_etudiant, let j=index">
          <td>{{j+1}}</td>
          <td>{{i.nom}}</td>
          <td>{{i.prenom}}</td>
          <td>{{i.date_naissance | date:'yyyy-MM-dd'}}</td>
          <td>{{i.mail}}</td>
          <td>{{i.nom_classe}}</td>
          <td>
            <button class="btn btn-sm btn-primary me-1 " data-bs-toggle="modal" data-bs-target="#edit" (click)="getetud(i)">
              ✏️
            </button>
            <button class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#remove" (click)="getdeleteid(i.id)">
              ❌
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<!--modal bch yzid etudiant-->
<div class="modal fade" id="addStudentModal" tabindex="-1" aria-labelledby="addStudentModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Ajouter un étudiant</h5>
        <button type="button" class="btn-close" id="close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form (ngSubmit)="ajout_etudiant_inscri()" #modalid="ngForm">
          <div class="mb-3">
            <label class="form-label">Nom</label>
            <input type="text" class="form-control" required name="nom" [(ngModel)]="data.nom">
          </div>
          <div class="mb-3">
            <label class="form-label">Prénom</label>
            <input type="text" class="form-control" name="prenom" required [(ngModel)]="data.prenom">
          </div>
          <div class="mb-3">
            <label class="form-label">Date_de_naissance</label>
            <input type="date" class="form-control" name="date_de_naissance" required [(ngModel)]="data.date_naissance">
          </div>
          <div class="mb-3">
            <label class="form-label">Email</label>
            <input type="email" class="form-control" required name="mail" [(ngModel)]="data.mail">
          </div>
          <div class="mb-3">
            <label class="form-label">Password</label>
            <input type="password" class="form-control" required name="pwd" readonly [(ngModel)]="data.mdp" >
          </div>
          <div class="mb-3">
            <label class="form-label">Année Scolaire</label>
            <input type="text" class="form-control" pattern="\d{4}-\d{4}" title="Format : 2025-2026" name="anneescolaire" required [(ngModel)]="data.annee_scolaire">
          </div>
          <button type="submit" class="btn btn-success w-100" [disabled]="!modalid.valid">
            Enregistrer
          </button>
        </form>
      </div>

    </div>
  </div>
</div>
<!--modal lel emploi -->
<div class="modal fade" id="Emploi" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Emploi du temps</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">

        <table class="table table-bordered table-striped text-center">
          <thead class="table-dark">
            <tr>
              <th>Jour</th>
              <th>08:00 - 10:00</th>
              <th>10:15 - 12:15</th>
              <th>13:30 - 15:30</th>
              <th>15:45 - 17:45</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let jour of ['Lundi','Mardi','Mercredi','Jeudi','Vendredi','Samedi']">
                <td>{{jour}}</td>
                <td><strong style="font-weight:bold;">{{sceance(jour,'08:00:00')?.matiere}}</strong><br>
                  <small>{{sceance(jour,'08:00:00')?.salle}}--</small>
                  <small>{{sceance(jour,'08:00:00')?.prof}}</small>
                </td>

                <td><strong style="font-weight:bold;">{{sceance(jour,'10:15:00')?.matiere}}</strong><br>
                  <small>{{sceance(jour,'10:15:00')?.salle}}--</small>
                  <small>{{sceance(jour,'10:15:00')?.prof}}</small>
                </td>
                <td><strong style="font-weight:bold;">{{sceance(jour,'13:30:00')?.matiere}}</strong><br>
                  <small>{{sceance(jour,'13:30:00')?.salle}}--</small>
                  <small>{{sceance(jour,'13:30:00')?.prof}}</small>
                </td>
                <td><strong style="font-weight:bold;">{{sceance(jour,'15:45:00')?.matiere}}</strong><br>
                  <small>{{sceance(jour,'15:45:00')?.salle}}--</small>
                  <small>{{sceance(jour,'15:45:00')?.prof}}</small>
                </td>
            </tr>
            
          </tbody>

        </table>

      </div>

    </div>
  </div>
</div>
<!-- modal tafsakh etudiant -->
 <div class="modal fade" id="remove" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-md modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">⚠️ Supprimer Etudiant</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" id="fermer"></button>
      </div>
      <div class="modal-body">
        <p class="text-center">Voulez-vous vraiement supprimer cet Etudiant?</p>
        <div class="d-flex justify-content-center">
          <button class="btn btn-success px-5 py-2" (click)="delete_inscri_etud()">Oui</button>
        </div>
      </div>

    </div>
  </div>
</div>
<!-- modal edit etudiant -->
 <div class="modal fade" id="edit" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-md modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Modifier Etudiant</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" id="sakker"></button>
      </div>
      <div class="modal-body">
        <form (ngSubmit)="majetud()" #majid="ngForm">
          <div class="mb-3">
            <label class="form-label">Nom</label>
            <input type="text" class="form-control" required name="nom" [(ngModel)]="edit_etud.nom">
          </div>
          <div class="mb-3">
            <label class="form-label">Prénom</label>
            <input type="text" class="form-control" name="prenom" required [(ngModel)]="edit_etud.prenom">
          </div>
          <div class="mb-3">
            <label class="form-label">Date_de_naissance</label>
            <input type="date" class="form-control" name="date_de_naissance" required [(ngModel)]="edit_etud.date_naissance">
          </div>
          <div class="mb-3">
            <label class="form-label">Email</label>
            <input type="email" class="form-control" required name="mail" [(ngModel)]="edit_etud.mail">
          </div>
          <div class="mb-3 d-flex justify-content-center">
            <button class="btn btn-success px-5 py-2" [disabled]="!majid.valid">Modifier</button>
          </div>
        </form>
      </div>

    </div>
  </div>
</div>
